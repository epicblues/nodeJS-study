# SQL 응용

## 트리거

* 트리거는 데이터베이스 시스템에서 삽입, 갱신, 삭제 등의 **이벤트**가 발생할 때마다 관련 작업이 자동으로 수행되는 절차형 SQL이다.
* 데이터 무결성
  * 데이터베이스에 저장된 데이터 값과 그것이 표현하는 실제 값이 일치하는 정확성을 의미한다.
* 트리거에서는 TCL(COMMIT, ROLLBACK) 트랜잭션 제어어 사용 불가
* 트리거 실행 중 오류 발생
  * 트리거 실행의 원인을 제공한 데이터에도 영향이 간다.

## 사용자 정의 함수

* 절차형 SQL을 활용하여 일련의 연산 처리 결과를 단일 값으로 반환할 수 있는 함수.
* 반환하는 단일 값을 조회 또는 삽입, 수정 작업에 이용한다.
  * 프로시저와의 유일한 차이점.

## SQL

* 데이터 정의어(DDL)
  * 테이블이나 관계의 구조를 생성하는 데 사용
  * CREATE, ALTER, DROP, TRUNCATE
* 데이터 조작어(DML)
  * 데이터베이스에 저장된 자료들을 입력, 수정, 삭제, 조회하는 언어
* 데이터 제어어(DCL)
  * 데이터베이스 관리자가 데이터 보안, 무결성 유지, 병행 제어, 회복을 위해 DBA가 사용하는 제어용 언어
  * GRANT, REVOKE

### DML

* SELECT
  * ALL(기본값)
    * 모든 튜플을 검색할 때 사용
  * DISTINCT
    * 중복된 속성이 조회될 경우 그 중 한개만 검색(SELECT 뒤에 명시된 속성이 중복될 경우 한 개만 검색)
  * DISTINCTROW
    * SELECT 뒤에 속성들과 상관없이 튜플 전체가 중복된 튜플을 제거

### DCL

* GRANT
  * 시스템 권한
    * GRANT 권한 TO 사용자
    * 관리지가 사용자에게 테이블/뷰/프로서지 등을 생성하고 삭제할 수 있는 권할을 부여
  * 객체 권한
    * GRANT 권한 ON 테이블 TO 사용자
    * 관리자가 사용자에게 테이블을 수정, 삽입, 삭제, 조회와 프로시저 실행을 할 수 있는 권한을 부여
  * **WITH GRANT OPTION**
    * 권한이 필요할 경우 다른 사용자에게 부여할 수 있는 권한
* REVOKE
  * **CASCADE CONSTRAINTS**
    * WITH GRANT OPTION으로 부여된 사용자들으권한까지 회수할 수 있다.
* SAVEPOINT 이름;
  * 특정 지점을 지정
* ROLLBACK TO SAVEPOINT 이름;
  * SAVEPOINT로 지정한 부분 이후에 발생한 트랜잭션 취소;



